{"version":3,"file":"ose.js","sources":["../src/module/actor/sheets/character-sheet.js","../src/module/actor/sheets/monster-sheet.js","../src/module/actor/actor.js","../src/ose.js"],"sourcesContent":["export class OspActorSheetCharacter extends foundry.appv1.sheets.ActorSheet {\n  static get defaultOptions() {\n    return foundry.utils.mergeObject(super.defaultOptions, {\n      classes: [\"osp\", \"sheet\", \"actor\", \"character\"],\n      template: \"systems/osp-houserules/templates/actors/character-sheet.html\",\n      width: 600,\n      height: 500,\n      tabs: [{ navSelector: \".sheet-tabs\", contentSelector: \".sheet-body\", initial: \"description\" }],\n    });\n  }\n\n  getData(options) {\n    const context = super.getData(options);\n    context.system = this.actor.system;\n    return context;\n  }\n\n  activateListeners(html) {\n    super.activateListeners(html);\n\n    const raceClasses = [\n      \"Elf\", \"Dwarf\", \"Gnome\", \"Hobbit\", \"Half-Elf\", \"Half-Orc\"\n    ];\n\n    const $classSelect = html.find('select[name=\"system.class\"]');\n    const $raceSelect = html.find('select[name=\"system.race\"]');\n\n    function syncRaceField() {\n      const selectedClass = $classSelect.val();\n      if (raceClasses.includes(selectedClass)) {\n        $raceSelect.val(selectedClass);\n        $raceSelect.prop(\"disabled\", true);\n      } else {\n        $raceSelect.prop(\"disabled\", false);\n      }\n    }\n\n    $classSelect.on(\"change\", syncRaceField);\n    syncRaceField();\n  }\n}","export class OspActorSheetMonster extends foundry.appv1.sheets.ActorSheet {\n  static get defaultOptions() {\n    return foundry.utils.mergeObject(super.defaultOptions, {\n      classes: [\"osp\", \"sheet\", \"actor\", \"monster\"],\n      template: \"systems/osp-houserules/templates/actors/monster-sheet.html\",\n      width: 600,\n      height: 400,\n      tabs: [{ navSelector: \".sheet-tabs\", contentSelector: \".sheet-body\", initial: \"description\" }],\n    });\n  }\n\n  getData(options) {\n    const context = super.getData(options);\n    context.system = this.actor.system;\n    return context;\n  }\n\n  activateListeners(html) {\n    super.activateListeners(html);\n  }\n}\n","export class OspActor extends Actor {\n  /** @override */\n  get displayName() {\n    return \"Actor\";\n  }\n\n  /** @override */\n  get displayNamePlural() {\n    return \"Actors\";\n  }\n\n  /** @override */\n  prepareData() {\n    super.prepareData();\n    // Add any system-specific actor prep here\n  }\n}\n","// ose.js - Main system entry point\nconsole.log(\"osp-houserules Debug: src/ose.js module loaded\");\n\nimport { OspActorSheetCharacter } from \"./module/actor/sheets/character-sheet.js\";\nimport { OspActorSheetMonster } from \"./module/actor/sheets/monster-sheet.js\";\nimport { OspActor } from \"./module/actor/actor.js\";\n\nHooks.once(\"init\", () => {\n  CONFIG.Actor.documentClass = OspActor;\n  CONFIG.Actor.label = game.i18n.localize(\"osp-houserules.Actor.documentLabel\");\n  foundry.documents.collections.Actors.unregisterSheet(\"core\", foundry.appv1.sheets.ActorSheet);\n  foundry.documents.collections.Actors.registerSheet(\"osp-houserules-houserules\", OspActorSheetCharacter, {\n    types: [\"character\"],\n    makeDefault: true,\n    label: game.i18n.localize(\"osp-houserules.Actor.Type.character\")\n  });\n  foundry.documents.collections.Actors.registerSheet(\"osp-houserules-houserules\", OspActorSheetMonster, {\n    types: [\"monster\"],\n    makeDefault: true,\n    label: game.i18n.localize(\"osp-houserules.Actor.Type.monster\")\n  });\n  CONFIG.Actor.typeLabels = {\n    character: game.i18n.localize(\"osp-houserules.Actor.Type.character\"),\n    monster: game.i18n.localize(\"osp-houserules.Actor.Type.monster\")\n  };\n\n  Hooks.on(\"renderActorConfig\", (app, html, data) => {\n    const $html = $(html);\n    const $select = $html.find('select[name=\"type\"]');\n    const $submit = $html.find('button[type=\"submit\"]');\n\n    // Insert a placeholder option if not present\n    if ($select.find('option[value=\"\"]').length === 0) {\n      $select.prepend(\n        `<option value=\"\" disabled>${game.i18n.localize(\"osp-houserules.ChooseType\")}</option>`\n      );\n      $select.val(\"\"); // Set the select to the placeholder\n    }\n\n    // Localize type options\n    $select.find('option[value=\"character\"]').text(game.i18n.localize(\"osp-houserules.Actor.Type.character\"));\n    $select.find('option[value=\"monster\"]').text(game.i18n.localize(\"osp-houserules.Actor.Type.monster\"));\n\n    // Disable submit if no type is selected\n    $submit.prop(\"disabled\", $select.val() === \"\");\n\n    // Enable submit when a valid type is chosen\n    $select.on(\"change\", function () {\n      $submit.prop(\"disabled\", $select.val() === \"\");\n    });\n  });\n\n  console.log(\"osp-houserules Debug: Actor sheets registered successfully\");\n});\n"],"names":[],"mappings":"AAAO,MAAM,sBAAsB,SAAS,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC;AAC5E,EAAE,WAAW,cAAc,GAAG;AAC9B,IAAI,OAAO,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,EAAE;AAC3D,MAAM,OAAO,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,WAAW,CAAC;AACrD,MAAM,QAAQ,EAAE,8DAA8D;AAC9E,MAAM,KAAK,EAAE,GAAG;AAChB,MAAM,MAAM,EAAE,GAAG;AACjB,MAAM,IAAI,EAAE,CAAC,EAAE,WAAW,EAAE,aAAa,EAAE,eAAe,EAAE,aAAa,EAAE,OAAO,EAAE,aAAa,EAAE,CAAC;AACpG,KAAK,CAAC,CAAC;AACP,GAAG;AACH;AACA,EAAE,OAAO,CAAC,OAAO,EAAE;AACnB,IAAI,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;AAC3C,IAAI,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;AACvC,IAAI,OAAO,OAAO,CAAC;AACnB,GAAG;AACH;AACA,EAAE,iBAAiB,CAAC,IAAI,EAAE;AAC1B,IAAI,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;AAClC;AACA,IAAI,MAAM,WAAW,GAAG;AACxB,MAAM,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,UAAU,EAAE,UAAU;AAC/D,KAAK,CAAC;AACN;AACA,IAAI,MAAM,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC;AAClE,IAAI,MAAM,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAC;AAChE;AACA,IAAI,SAAS,aAAa,GAAG;AAC7B,MAAM,MAAM,aAAa,GAAG,YAAY,CAAC,GAAG,EAAE,CAAC;AAC/C,MAAM,IAAI,WAAW,CAAC,QAAQ,CAAC,aAAa,CAAC,EAAE;AAC/C,QAAQ,WAAW,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;AACvC,QAAQ,WAAW,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;AAC3C,OAAO,MAAM;AACb,QAAQ,WAAW,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;AAC5C,OAAO;AACP,KAAK;AACL;AACA,IAAI,YAAY,CAAC,EAAE,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC;AAC7C,IAAI,aAAa,EAAE,CAAC;AACpB,GAAG;AACH;;ACxCO,MAAM,oBAAoB,SAAS,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC;AAC1E,EAAE,WAAW,cAAc,GAAG;AAC9B,IAAI,OAAO,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,EAAE;AAC3D,MAAM,OAAO,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,SAAS,CAAC;AACnD,MAAM,QAAQ,EAAE,4DAA4D;AAC5E,MAAM,KAAK,EAAE,GAAG;AAChB,MAAM,MAAM,EAAE,GAAG;AACjB,MAAM,IAAI,EAAE,CAAC,EAAE,WAAW,EAAE,aAAa,EAAE,eAAe,EAAE,aAAa,EAAE,OAAO,EAAE,aAAa,EAAE,CAAC;AACpG,KAAK,CAAC,CAAC;AACP,GAAG;AACH;AACA,EAAE,OAAO,CAAC,OAAO,EAAE;AACnB,IAAI,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;AAC3C,IAAI,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;AACvC,IAAI,OAAO,OAAO,CAAC;AACnB,GAAG;AACH;AACA,EAAE,iBAAiB,CAAC,IAAI,EAAE;AAC1B,IAAI,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;AAClC,GAAG;AACH;;ACpBO,MAAM,QAAQ,SAAS,KAAK,CAAC;AACpC;AACA,EAAE,IAAI,WAAW,GAAG;AACpB,IAAI,OAAO,OAAO,CAAC;AACnB,GAAG;AACH;AACA;AACA,EAAE,IAAI,iBAAiB,GAAG;AAC1B,IAAI,OAAO,QAAQ,CAAC;AACpB,GAAG;AACH;AACA;AACA,EAAE,WAAW,GAAG;AAChB,IAAI,KAAK,CAAC,WAAW,EAAE,CAAC;AACxB;AACA,GAAG;AACH;;AChBA;AACA,OAAO,CAAC,GAAG,CAAC,gDAAgD,CAAC,CAAC;AAK9D;AACA,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM;AACzB,EAAE,MAAM,CAAC,KAAK,CAAC,aAAa,GAAG,QAAQ,CAAC;AACxC,EAAE,MAAM,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,oCAAoC,CAAC,CAAC;AAChF,EAAE,OAAO,CAAC,SAAS,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe,CAAC,MAAM,EAAE,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;AAChG,EAAE,OAAO,CAAC,SAAS,CAAC,WAAW,CAAC,MAAM,CAAC,aAAa,CAAC,2BAA2B,EAAE,sBAAsB,EAAE;AAC1G,IAAI,KAAK,EAAE,CAAC,WAAW,CAAC;AACxB,IAAI,WAAW,EAAE,IAAI;AACrB,IAAI,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,qCAAqC,CAAC;AACpE,GAAG,CAAC,CAAC;AACL,EAAE,OAAO,CAAC,SAAS,CAAC,WAAW,CAAC,MAAM,CAAC,aAAa,CAAC,2BAA2B,EAAE,oBAAoB,EAAE;AACxG,IAAI,KAAK,EAAE,CAAC,SAAS,CAAC;AACtB,IAAI,WAAW,EAAE,IAAI;AACrB,IAAI,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,mCAAmC,CAAC;AAClE,GAAG,CAAC,CAAC;AACL,EAAE,MAAM,CAAC,KAAK,CAAC,UAAU,GAAG;AAC5B,IAAI,SAAS,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,qCAAqC,CAAC;AACxE,IAAI,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,mCAAmC,CAAC;AACpE,GAAG,CAAC;AACJ;AACA,EAAE,KAAK,CAAC,EAAE,CAAC,mBAAmB,EAAE,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,KAAK;AACrD,IAAI,MAAM,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC;AAC1B,IAAI,MAAM,OAAO,GAAG,KAAK,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;AACtD,IAAI,MAAM,OAAO,GAAG,KAAK,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;AACxD;AACA;AACA,IAAI,IAAI,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;AACvD,MAAM,OAAO,CAAC,OAAO;AACrB,QAAQ,CAAC,0BAA0B,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,2BAA2B,CAAC,CAAC,SAAS,CAAC;AAC/F,OAAO,CAAC;AACR,MAAM,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;AACtB,KAAK;AACL;AACA;AACA,IAAI,OAAO,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,qCAAqC,CAAC,CAAC,CAAC;AAC9G,IAAI,OAAO,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,mCAAmC,CAAC,CAAC,CAAC;AAC1G;AACA;AACA,IAAI,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE,OAAO,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC;AACnD;AACA;AACA,IAAI,OAAO,CAAC,EAAE,CAAC,QAAQ,EAAE,YAAY;AACrC,MAAM,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE,OAAO,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC;AACrD,KAAK,CAAC,CAAC;AACP,GAAG,CAAC,CAAC;AACL;AACA,EAAE,OAAO,CAAC,GAAG,CAAC,4DAA4D,CAAC,CAAC;AAC5E,CAAC,CAAC"}